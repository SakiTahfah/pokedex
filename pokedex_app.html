<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pok√©dex App</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: white;
            font-size: 3rem;
            margin-bottom: 2rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
            to { text-shadow: 2px 2px 4px rgba(255,255,255,0.3), 0 0 20px rgba(255,255,255,0.2); }
        }

        .search-container {
            position: relative;
            max-width: 500px;
            margin: 0 auto 2rem;
        }

        .search-input {
            width: 100%;
            padding: 15px 20px;
            font-size: 1.1rem;
            border: none;
            border-radius: 25px;
            outline: none;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }

        .search-input:focus {
            transform: translateY(-2px);
            box-shadow: 0 12px 35px rgba(0,0,0,0.3);
        }

        .suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            margin-top: 5px;
        }

        .suggestion-item {
            padding: 12px 20px;
            cursor: pointer;
            transition: background-color 0.2s;
            text-transform: capitalize;
        }

        .suggestion-item:hover {
            background-color: #f0f0f0;
        }

        .suggestion-item:first-child {
            border-radius: 15px 15px 0 0;
        }

        .suggestion-item:last-child {
            border-radius: 0 0 15px 15px;
        }

        .pokemon-card {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            max-width: 600px;
            margin: 0 auto;
            transform: translateY(10px);
            opacity: 0;
            transition: all 0.5s ease;
        }

        .pokemon-card.show {
            transform: translateY(0);
            opacity: 1;
        }

        .pokemon-header {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .pokemon-name {
            font-size: 2.5rem;
            color: #333;
            margin-bottom: 0.5rem;
            text-transform: capitalize;
        }

        .pokemon-id {
            color: #666;
            font-size: 1.1rem;
        }

        .pokemon-sprite {
            width: 200px;
            height: 200px;
            margin: 0 auto 1.5rem;
            display: block;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .pokemon-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .info-section {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 10px;
        }

        .info-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .hp-value {
            font-size: 1.2rem;
            color: #e74c3c;
            font-weight: bold;
        }

        .type-badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 15px;
            color: white;
            font-size: 0.9rem;
            margin: 2px;
            text-transform: capitalize;
            font-weight: bold;
        }

        .type-normal { background-color: #A8A878; }
        .type-fire { background-color: #F08030; }
        .type-water { background-color: #6890F0; }
        .type-electric { background-color: #F8D030; }
        .type-grass { background-color: #78C850; }
        .type-ice { background-color: #98D8D8; }
        .type-fighting { background-color: #C03028; }
        .type-poison { background-color: #A040A0; }
        .type-ground { background-color: #E0C068; }
        .type-flying { background-color: #A890F0; }
        .type-psychic { background-color: #F85888; }
        .type-bug { background-color: #A8B820; }
        .type-rock { background-color: #B8A038; }
        .type-ghost { background-color: #705898; }
        .type-dragon { background-color: #7038F8; }
        .type-dark { background-color: #705848; }
        .type-steel { background-color: #B8B8D0; }
        .type-fairy { background-color: #EE99AC; }

        .abilities-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .ability-badge {
            background: #3498db;
            color: white;
            padding: 5px 10px;
            border-radius: 10px;
            font-size: 0.9rem;
            text-transform: capitalize;
        }

        .loading {
            text-align: center;
            color: white;
            font-size: 1.2rem;
            margin: 2rem 0;
        }

        .error {
            text-align: center;
            color: #e74c3c;
            background: white;
            padding: 1rem;
            border-radius: 10px;
            margin: 1rem auto;
            max-width: 500px;
        }

        @media (max-width: 768px) {
            .pokemon-info {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .pokemon-sprite {
                width: 150px;
                height: 150px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üî¥ Pok√©dex</h1>
        
        <div class="search-container">
            <input type="text" class="search-input" placeholder="Search for a Pok√©mon..." id="searchInput">
            <div class="suggestions" id="suggestions"></div>
        </div>
        
        <div id="loading" class="loading" style="display: none;">
            Loading Pok√©mon data...
        </div>
        
        <div id="error" class="error" style="display: none;"></div>
        
        <div id="pokemonCard" class="pokemon-card" style="display: none;">
            <div class="pokemon-header">
                <h2 class="pokemon-name" id="pokemonName"></h2>
                <p class="pokemon-id" id="pokemonId"></p>
            </div>
            
            <img class="pokemon-sprite" id="pokemonSprite" alt="Pokemon Sprite">
            
            <div class="pokemon-info">
                <div class="info-section">
                    <div class="info-title">üíö HP</div>
                    <div class="hp-value" id="pokemonHP"></div>
                </div>
                
                <div class="info-section">
                    <div class="info-title">‚ö° Types</div>
                    <div id="pokemonTypes"></div>
                </div>
                
                <div class="info-section">
                    <div class="info-title">üéØ Abilities</div>
                    <div class="abilities-list" id="pokemonAbilities"></div>
                </div>
                
                <div class="info-section">
                    <div class="info-title">üõ°Ô∏è Weaknesses</div>
                    <div id="pokemonWeaknesses"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Type effectiveness chart for calculating weaknesses
        const typeChart = {
            normal: { fighting: 2 },
            fire: { water: 2, ground: 2, rock: 2 },
            water: { electric: 2, grass: 2 },
            electric: { ground: 2 },
            grass: { fire: 2, ice: 2, poison: 2, flying: 2, bug: 2 },
            ice: { fire: 2, fighting: 2, rock: 2, steel: 2 },
            fighting: { flying: 2, psychic: 2, fairy: 2 },
            poison: { ground: 2, psychic: 2 },
            ground: { water: 2, grass: 2, ice: 2 },
            flying: { electric: 2, ice: 2, rock: 2 },
            psychic: { bug: 2, ghost: 2, dark: 2 },
            bug: { fire: 2, flying: 2, rock: 2 },
            rock: { water: 2, grass: 2, fighting: 2, ground: 2, steel: 2 },
            ghost: { ghost: 2, dark: 2 },
            dragon: { ice: 2, dragon: 2, fairy: 2 },
            dark: { fighting: 2, bug: 2, fairy: 2 },
            steel: { fire: 2, fighting: 2, ground: 2 },
            fairy: { poison: 2, steel: 2 }
        };

        // Cache for Pokemon names to avoid repeated API calls
        let pokemonNames = [
            'pikachu', 'charizard', 'blastoise', 'venusaur', 'alakazam', 'machamp', 'golem', 'gengar', 'onix', 'hypno',
            'electrode', 'marowak', 'hitmonlee', 'hitmonchan', 'lickitung', 'rhydon', 'chansey', 'tangela', 'kangaskhan',
            'horsea', 'seadra', 'goldeen', 'seaking', 'staryu', 'starmie', 'scyther', 'jynx', 'electabuzz', 'magmar',
            'pinsir', 'tauros', 'magikarp', 'gyarados', 'lapras', 'ditto', 'eevee', 'vaporeon', 'jolteon', 'flareon',
            'porygon', 'omanyte', 'omastar', 'kabuto', 'kabutops', 'aerodactyl', 'snorlax', 'articuno', 'zapdos',
            'moltres', 'dratini', 'dragonair', 'dragonite', 'mewtwo', 'mew', 'chikorita', 'cyndaquil', 'totodile',
            'lugia', 'ho-oh', 'celebi', 'treecko', 'torchic', 'mudkip', 'rayquaza', 'jirachi', 'deoxys', 'turtwig',
            'chimchar', 'piplup', 'dialga', 'palkia', 'giratina', 'darkrai', 'arceus', 'snivy', 'tepig', 'oshawott',
            'reshiram', 'zekrom', 'kyurem', 'keldeo', 'meloetta', 'genesect', 'chespin', 'fennekin', 'froakie',
            'xerneas', 'yveltal', 'zygarde', 'diancie', 'hoopa', 'volcanion', 'rowlet', 'litten', 'popplio',
            'solgaleo', 'lunala', 'necrozma', 'magearna', 'marshadow', 'zeraora', 'grookey', 'scorbunny', 'sobble',
            'zacian', 'zamazenta', 'eternatus', 'zarude', 'regieleki', 'regidrago', 'glastrier', 'spectrier', 'calyrex'
        ];
        let isLoadingNames = false;

        // DOM elements
        const searchInput = document.getElementById('searchInput');
        const suggestions = document.getElementById('suggestions');
        const pokemonCard = document.getElementById('pokemonCard');
        const loading = document.getElementById('loading');
        const error = document.getElementById('error');

        // Load Pokemon names for auto-suggest
        async function loadPokemonNames() {
            if (isLoadingNames) return;
            
            isLoadingNames = true;
            try {
                console.log('Attempting to load Pokemon names from API...');
                
                const response = await fetch('https://pokeapi.co/api/v2/pokemon?limit=50');
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                const apiNames = data.results.map(pokemon => pokemon.name);
                
                // Merge with existing names and remove duplicates
                pokemonNames = [...new Set([...pokemonNames, ...apiNames])].sort();
                
                console.log('Successfully loaded', pokemonNames.length, 'Pokemon names from API');
                
            } catch (err) {
                console.log('Using fallback Pokemon names list');
                console.error('API Error (using fallback):', err.message);
                // We already have a good fallback list, so we don't need to do anything
            }
            isLoadingNames = false;
        }

        // Show suggestions based on input
        function showSuggestions(input) {
            const filtered = pokemonNames.filter(name => 
                name.toLowerCase().includes(input.toLowerCase())
            ).slice(0, 5);

            suggestions.innerHTML = '';
            
            if (filtered.length > 0 && input.length > 0) {
                filtered.forEach(name => {
                    const div = document.createElement('div');
                    div.className = 'suggestion-item';
                    div.textContent = name;
                    div.addEventListener('click', () => {
                        searchInput.value = name;
                        suggestions.innerHTML = '';
                        searchPokemon(name);
                    });
                    suggestions.appendChild(div);
                });
                suggestions.style.display = 'block';
            } else {
                suggestions.style.display = 'none';
            }
        }

        // Calculate weaknesses based on types
        function calculateWeaknesses(types) {
            const weaknesses = new Set();
            
            types.forEach(type => {
                const typeWeaknesses = typeChart[type.type.name];
                if (typeWeaknesses) {
                    Object.keys(typeWeaknesses).forEach(weakness => {
                        weaknesses.add(weakness);
                    });
                }
            });
            
            return Array.from(weaknesses);
        }

        // Main function to search and display Pokemon
        async function searchPokemon(pokemonName) {
            if (!pokemonName.trim()) return;

            showLoading(true);
            hideError();
            hidePokemonCard();

            try {
                // Clean the Pokemon name
                const cleanName = pokemonName.toLowerCase().trim().replace(/[^a-z0-9-]/g, '');
                
                console.log('Searching for:', cleanName);
                
                const response = await fetch(`https://pokeapi.co/api/v2/pokemon/${cleanName}`);
                
                console.log('Response status:', response.status);
                console.log('Response ok:', response.ok);
                
                if (!response.ok) {
                    if (response.status === 404) {
                        throw new Error(`Pokemon "${pokemonName}" not found. Try checking the spelling or use suggestions.`);
                    } else {
                        throw new Error(`API Error: ${response.status} - ${response.statusText}`);
                    }
                }
                
                const pokemon = await response.json();
                console.log('Pokemon data received:', pokemon.name);
                displayPokemon(pokemon);
                
            } catch (err) {
                console.error('Error fetching Pokemon:', err);
                if (err.name === 'TypeError' || err.message.includes('fetch') || err.message.includes('Failed to fetch')) {
                    showError('Network error. Please check your internet connection and try again.');
                } else {
                    showError(err.message);
                }
            }
            
            showLoading(false);
        }

        // Display Pokemon data in the card
        function displayPokemon(pokemon) {
            try {
                document.getElementById('pokemonName').textContent = pokemon.name;
                document.getElementById('pokemonId').textContent = `#${pokemon.id.toString().padStart(3, '0')}`;
                
                // Set sprite with fallback
                const sprite = pokemon.sprites.front_default || 
                             pokemon.sprites.front_shiny || 
                             pokemon.sprites.other?.['official-artwork']?.front_default ||
                             'https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/0.png';
                             
                document.getElementById('pokemonSprite').src = sprite;
                document.getElementById('pokemonSprite').onerror = function() {
                    this.src = 'https://via.placeholder.com/200x200?text=No+Image';
                };
                
                // HP
                const hpStat = pokemon.stats.find(stat => stat.stat.name === 'hp');
                document.getElementById('pokemonHP').textContent = hpStat ? hpStat.base_stat : 'Unknown';
                
                // Types
                const typesContainer = document.getElementById('pokemonTypes');
                typesContainer.innerHTML = '';
                if (pokemon.types && pokemon.types.length > 0) {
                    pokemon.types.forEach(type => {
                        const span = document.createElement('span');
                        span.className = `type-badge type-${type.type.name}`;
                        span.textContent = type.type.name;
                        typesContainer.appendChild(span);
                    });
                } else {
                    typesContainer.textContent = 'Unknown';
                }
                
                // Abilities
                const abilitiesContainer = document.getElementById('pokemonAbilities');
                abilitiesContainer.innerHTML = '';
                if (pokemon.abilities && pokemon.abilities.length > 0) {
                    pokemon.abilities.forEach(ability => {
                        const span = document.createElement('span');
                        span.className = 'ability-badge';
                        span.textContent = ability.ability.name.replace('-', ' ');
                        abilitiesContainer.appendChild(span);
                    });
                } else {
                    abilitiesContainer.textContent = 'Unknown';
                }
                
                // Weaknesses
                const weaknesses = calculateWeaknesses(pokemon.types || []);
                const weaknessesContainer = document.getElementById('pokemonWeaknesses');
                weaknessesContainer.innerHTML = '';
                if (weaknesses.length > 0) {
                    weaknesses.forEach(weakness => {
                        const span = document.createElement('span');
                        span.className = `type-badge type-${weakness}`;
                        span.textContent = weakness;
                        weaknessesContainer.appendChild(span);
                    });
                } else {
                    weaknessesContainer.textContent = 'None found';
                }
                
                showPokemonCard();
            } catch (err) {
                console.error('Error displaying Pokemon data:', err);
                showError('Error displaying Pokemon data. The data might be incomplete.');
            }
        }

        // Utility functions
        function showLoading(show) {
            loading.style.display = show ? 'block' : 'none';
        }

        function showError(message) {
            error.textContent = message;
            error.style.display = 'block';
        }

        function hideError() {
            error.style.display = 'none';
        }

        function showPokemonCard() {
            pokemonCard.style.display = 'block';
            setTimeout(() => pokemonCard.classList.add('show'), 50);
        }

        function hidePokemonCard() {
            pokemonCard.classList.remove('show');
            setTimeout(() => pokemonCard.style.display = 'none', 300);
        }

        // Event listeners
        searchInput.addEventListener('input', (e) => {
            showSuggestions(e.target.value);
        });

        searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                suggestions.innerHTML = '';
                searchPokemon(e.target.value);
            }
        });

        // Hide suggestions when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.search-container')) {
                suggestions.innerHTML = '';
            }
        });

        // Load Pokemon names when page loads
        loadPokemonNames();
    </script>
</body>
</html>